<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>CORENG - Lorong Literasi</title>
<link rel="stylesheet" href="style.css">
<style>
/* Tambahan styling untuk thumbnail dan like */
.card {
  border: 1px solid #ccc;
  padding: 15px;
  margin: 10px;
  border-radius: 8px;
  display: flex;
  gap: 15px;
  align-items: flex-start;
}

.card img {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  object-fit: cover;
}

.card-content {
  flex: 1;
}

.card-content h3 {
  margin: 0;
}

.card-content small {
  color: #555;
}

.card-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 5px;
}

.like {
  color: #e74c3c;
  font-weight: bold;
}
</style>
</head>

<body>

<!-- NAVBAR -->
<nav>
  <div class="logo">CORENG</div>
  <div>
    <a href="index.html">Beranda</a>
    <a href="puisi.html">Puisi</a>
    <a href="cerpen.html">Cerpen</a>
    <a href="likhati.html">Likhati</a>
    <a href="kirim.html">Kirim Karya</a>
    <a href="penulis.html">Penulis</a>
  </div>
</nav>

<!-- HERO -->
<section class="hero">
  <h1>Lorong Literasi</h1>
  <p>Menggores batu-batu dengan kata dan doa sederhana</p>
</section>

<!-- SEARCH -->
<div class="search-box">
  <input type="text" id="searchInput" placeholder="üîé Cari judul, nama, jenis, atau isi karya...">
</div>

<!-- CONTAINER KARYA -->
<div id="karyaContainer"></div>

<footer>
  ¬© 2026 CORENG - Portal Literasi Sekolah
</footer>

<script>
const url = "https://script.google.com/macros/s/AKfycbwAYPlfKkUQk3-uQUC1XUxUQ-3hqDG2qZWuw0vdOc1ZkGpu8BJe0446yNZUBs0yGL9RPw/exec"; // GANTI dengan URL Web App

let semuaData = [];

// Ambil data karya
fetch(url + "?action=getKarya")
.then(res => res.json())
.then(data => {
  semuaData = data.reverse(); // terbaru dulu
  tampilkan(semuaData);
});

function tampilkan(data){
  let html = "";

  data.forEach(d => {
    // d[9] = Foto Profil, d[10] = Like
    html += `
      <div class="card">
        <img src="${d[9] ? d[9] : 'default.png'}" alt="Profil">
        <div class="card-content">
          <h3>${d[4]}</h3>
          <small>‚úç ${d[3]} | ${d[1]}</small>
          <p>${d[5].substring(0,200)}...</p>
          <div class="card-footer">
            <a href="karya.html?id=${d[0]}">üìñ Baca Selengkapnya</a>
            <span class="like">‚ù§Ô∏è ${d[10] ? d[10] : 0}</span>
          </div>
        </div>
      </div>
    `;
  });

  document.getElementById("karyaContainer").innerHTML = html;
}

// SEARCH
document.getElementById("searchInput").addEventListener("input", function(){
  const keyword = this.value.toLowerCase();

  const hasil = semuaData.filter(d =>
    d[2].toLowerCase().includes(keyword) || // Nama
    d[3].toLowerCase().includes(keyword) || // Jenis
    d[4].toLowerCase().includes(keyword) || // Judul
    d[5].toLowerCase().includes(keyword)    // Isi
  );

  tampilkan(hasil);
});
</script>

</body>
</html>
